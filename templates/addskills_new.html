
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>Create a Consultation Record</title>

    <link rel="stylesheet" href="">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Bootstrap libraries -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
    <!--Start of navbar-->
    <nav class="navbar navbar-expand-lg bg-light nav nav-tabs">
        <div class="container-fluid">
          <a class="navbar-brand">LJPS</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="homepage.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="skills.html">Skills</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="view_roles.html">Roles</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    <!--end of navbar-->



    <div id="main-container" class="container">
        <h1 class="display-4">Add a Skill</h1>

        <form>
        <h2>Enter Skill Name</h2>

        <div class="form-group">
            <input type="text" class="form-control" id="Skill_Name" v-model="Skill_Name">
        </div>

        <h2>Enter Skill ID</h2>

        <div class="form-group">
            <input type="text" class="form-control" id="Skill_ID" v-model="Skill_ID">
        </div>

        <h2>Enter Skill Description</h2>

        <div class="form-group">
            <input type="text" class="form-control" id="Skill_Desc" v-model="Skill_Desc">
        </div>

        
        <h2>Select a Course</h2>
        <div v-for="Course in Courses" class="form-check">
            <input class="form-check-input" type="checkbox" name="CoursesSelected[]" :value="Course.Course_ID"  v-bind="Courses">
            <label class="form-check-label" v-bind:for="Course.Course_ID">
                {{Course.Course_ID}}, {{Course.Course_Name}}
            </label>
        </div>

          <!-- <h2>Diagnosis</h2>

          <div class="form-group">
            <input type="text" class="form-control" name="diagnosis" id="diagnosis" v-model="diagnosis">
          </div>

          <h2>Prescription</h2>

          <div class="form-group">
            <input type="text" class="form-control" name="prescription" id="prescription" v-model="prescription">
          </div>

          <h2>Appointment Length</h2>

          <div class="form-group">
            <input type="number" class="form-control" name="length" id="length" v-model="length">
            <small id="length" class="form-text text-muted">Please specify the number of <strong>minutes</strong></small>
          </div> -->

        <button id="addConsultBtn" class="btn btn-primary" v-on:click="multiple">Create Skill</button>
        <p><label id="error" class="text-danger">{{ error }}</label></p>
        </form>

        <!-- <p>
            <em><strong>Pages:</strong> <a href="view-consultations.html">View Consultation Records</a></em>
        </p> -->

    </div>
    <script>
        const vm = new Vue({
        el: '#main-container',
        data: {
            Courses: [], 
            Skill_Name: '',
            Skill_ID: '',
            Skill_Desc:'',
            Skill_Status:'',
            error: ''
        },
        methods: {
                multiple:function(){
                    this.submitForm1()
                    this.submitForm()
                },
                submitForm: function() {
                event.preventDefault();
                axios.post('http://localhost:5001/addSkill', {
                        Skill_ID: this.Skill_ID,
                        Skill_Name: this.Skill_Name,
                        Skill_Desc: this.Skill_Desc,
                        Skill_Status: this.Skill_Status
                    })
                .then(response => {
                        window.location.replace("./skills.html");
                        return false;
                    })
                .catch(error => { error => alert(error) });
                },
                submitForm1: function() {
                event.preventDefault();
                axios.post('http://localhost:5001/addSkillreqCourses', {
                        Course_ID: this.Courses,
                        Skill_ID: this.Skill_ID,
                    })
                .then(response => {
                        // window.location.replace("./skills.html");
                        return false;
                    })
                .catch(error => { error => alert(error) });
                }
            },
        mounted: function() {
            axios.get('http://localhost:5001/Courses')
                .then(response => {
                    this.Courses = response.data.data;
                })
                .catch(error => alert(error));
        }
    });
    </script>
</body>

</html>